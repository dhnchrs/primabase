{% extends "/layout/layout.html" %}

{% block content %}
	<div class="page">
      <div class="page-main">
        <div class="header py-4">
          <div class="container">
            <div class="d-flex">
              <a class="header-brand" href="/home">
                <img src="/assets/logo.png" class="header-brand-img" alt="Primabase">Primabase
              </a>
              <div class="d-flex order-lg-2 ml-auto">
                <div class="dropdown d-none d-md-flex">
                  <a class="nav-link icon" data-toggle="dropdown">
                    <i class="fe fe-bell"></i>
                    <span class="nav-unread"></span>
                  </a>
                </div>
                <div class="dropdown">
                  <a href="#" class="nav-link pr-0 leading-none" data-toggle="dropdown">
                    <span class="avatar" style="background-image: url(./demo/faces/female/25.jpg)"></span>
                    <span class="ml-2 d-none d-lg-block">
                      <span class="text-default">Dhaniel Nana C</span>
                      <small class="text-muted d-block mt-1">Administrator</small>
                    </span>
                  </a>
                  <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow">
                    <a class="dropdown-item" href="#">
                      <i class="dropdown-icon fe fe-user"></i> Profile
                    </a>
                    <a class="dropdown-item" href="#">
                      <i class="dropdown-icon fe fe-settings"></i> Settings
                    </a>
                    <a class="dropdown-item" href="#">
                      <i class="dropdown-icon fe fe-mail"></i> Inbox
                    </a>
                    <a class="dropdown-item" href="#">
                      <i class="dropdown-icon fe fe-send"></i> Message
                    </a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="#">
                      <i class="dropdown-icon fe fe-help-circle"></i> Need help?
                    </a>
                    <a class="dropdown-item" href="/logout">
                      <i class="dropdown-icon fe fe-log-out"></i> Sign out
                    </a>
                  </div>
                </div>
              </div>
              <a href="#" class="header-toggler d-lg-none ml-3 ml-lg-0" data-toggle="collapse" data-target="#headerMenuCollapse">
                <span class="header-toggler-icon"></span>
              </a>
            </div>
          </div>
        </div>
        <div class="header collapse d-lg-flex p-0" id="headerMenuCollapse">
          <div class="container">
            <div class="row align-items-center">
              <div class="col-lg-3 ml-auto">
                <form class="input-icon my-3 my-lg-0">
                  <input type="search" class="form-control header-search" placeholder="Search&hellip;" tabindex="1">
                  <div class="input-icon-addon">
                    <i class="fe fe-search"></i>
                  </div>
                </form>
              </div>
              <div class="col-lg order-lg-first">
                <ul class="nav nav-tabs border-0 flex-column flex-lg-row">
                  <li class="nav-item">
                    <a href="/home" class="nav-link"><i class="fe fe-home"></i> Home</a>
                  </li>
                  <li class="nav-item">
                    <a href="/tenant" class="nav-link"><i class="fe fe-box"></i> Tenant</a>
                  </li>
                  <li class="nav-item dropdown">
                    <a href="/pos" class="nav-link"><i class="fe fe-calendar"></i> Pos</a>
                  </li>
                  <li class="nav-item dropdown">
                    <a href="/logger" class="nav-link"><i class="fe fe-file"></i> Logger</a>
                  </li>
				  <li class="nav-item dropdown">
                    <a href="/periodic" class="nav-link active"><i class="fe fe-check-square"></i> Periodic</a>
                  </li>
                  <li class="nav-item">
                    <a href="/anomali" class="nav-link"><i class="fe fe-image"></i> Anomali</a>
                  </li>
                  <li class="nav-item">
                    <a href="#" class="nav-link"><i class="fe fe-file-text"></i> About Us</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="my-3 my-md-5">
          <div class="container">
            <div class="page-header">
              <h1 class="page-title">
                Periodic
              </h1>
            </div>
			<div class="col-lg-12 col-xl-12">
                <div class="card">
                  <div class="card-header">
                    <h3 class="card-title">Periodic</h3>
                  </div>
                  <div class="card-body">
						<form role="form" method="POST" action="/periodic">
							<div class="form-group">
								<table>
									<tr>
										<td>Dari&nbsp;</td>
										<td><input type="date" class="form-control" id="waktuawal" name="waktuawal" value="{{ wawl }}" required></td>
										<td>&nbsp;hingga&nbsp;</td>
										<td><input type="date" class="form-control" id="waktuakhir" name="waktuakhir" value="{{ wakhr }}" required></td>
										<td>&nbsp;<button type="submit" class="btn btn-primary ml-auto">Submit</button></td>
									</tr>
								</table>
							</div>
						</form>
                    <div id="chart-bar-stacked" style="height: 25rem"></div>
                  </div>
                </div>
                <script>
					function getRandomColor() {
					  var letters = '0123456789ABCDEF';
					  var color = '#';
					  for (var i = 0; i < 6; i++) {
						color += letters[Math.floor(Math.random() * 16)];
					  }
					  return color;
					}
					require(['c3', 'jquery'], function(c3, $) {
                  	$(document).ready(function(){
                  		var chart = c3.generate({
                  			bindto: '#chart-bar-stacked', // id of chart wrapper
                  			data: {
                  				columns: [
                  				    // each columns data
									{% if data %}
									{% for row in data %}
										['{{ row.sampling }}', {{ row.wlevel }}, {{ row.rain }}, {{ row.temperature }}, {{ row.humidity }}, {{ row.altitude }}, {{ row.battery }}, {{ row.signalquality }}],
									{% endfor %}
									{% endif %}
								],
                  				type: 'bar', // default type of chart
                  				groups: [
                  					[
									{% if data %}
									{% for row in data %}
										'{{ row.sampling }}',
									{% endfor %}
									{% endif %}
									]
                  				],
                  				colors: {
									{% if data %}
									{% for row in data %}
										'{{ row.sampling }}': tabler.colors[getRandomColor()],
									{% endfor %}
									{% endif %}
                  				}
                  			},
                  			axis: {
                  				x: {
                  					type: 'category',
                  					// name of each category
                  					categories: ['Wlevel', 'Rain', 'Temperature', 'Humidity', 'Altitude', 'Battery', 'Signal Quality']
                  				},
                  			},
                  			bar: {
                  				width: 100
                  			},
                  			legend: {
                                  show: true, //hide legend
                  			},
                  			padding: {
                  				bottom: 0,
                  				top: 0
                  			},
                  		});
                  	});
                  });
                </script>

              </div>
           </div>
         </div>
        </div>
      <div class="footer">
        <div class="container">
          <div class="row">
            <div class="col-lg-8">
              <div class="row">
                <div class="col-6 col-md-3">
                  <ul class="list-unstyled mb-0">
                    <li><a href="#">First link</a></li>
                    <li><a href="#">Second link</a></li>
                  </ul>
                </div>
                <div class="col-6 col-md-3">
                  <ul class="list-unstyled mb-0">
                    <li><a href="#">Third link</a></li>
                    <li><a href="#">Fourth link</a></li>
                  </ul>
                </div>
                <div class="col-6 col-md-3">
                  <ul class="list-unstyled mb-0">
                    <li><a href="#">Fifth link</a></li>
                    <li><a href="#">Sixth link</a></li>
                  </ul>
                </div>
                <div class="col-6 col-md-3">
                  <ul class="list-unstyled mb-0">
                    <li><a href="#">Other link</a></li>
                    <li><a href="#">Last link</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <footer class="footer">
        <div class="container">
          <div class="row align-items-center flex-row-reverse">
            <div class="col-auto ml-lg-auto">
              <div class="row align-items-center">
                <div class="col-auto">
                  <ul class="list-inline list-inline-dots mb-0">
                    <li class="list-inline-item"><a href="./docs/index.html">Documentation</a></li>
                    <li class="list-inline-item"><a href="./faq.html">FAQ</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-12 col-lg-auto mt-3 mt-lg-0 text-center">
              Copyright Â© 2018 <a href=".">Tabler</a>. All rights reserved.
            </div>
          </div>
        </div>
      </footer>
    </div>
{% endblock content %}